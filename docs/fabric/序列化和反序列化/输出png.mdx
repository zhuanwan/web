---
sidebar_position: 2
---

import { Test1 } from './输出png.jsx'

# 输出png

`canvas.toDataURL('png')` 输出png（base64）

使用 `canvas.toDataURL('png')` 可以输出 `png` 图片。但这个操作可能会打断 `canvas` 的渲染，所以之后要再执行以下 `canvas.requestRenderAll()` 。

## 示例


<Test1></Test1>

<br />

```js
export function Test1() {
  const canvasRef = useRef(null)
  const fabricCanvas = useRef(null)

  const draw = (canvas) => {
    const rect = new fabric.Rect({
      top: 20,
      left: 120,
      width: 60,
      height: 40,
      fill: 'transparent',
      stroke: 'blue'
    })
    canvas.add(rect)

    // highlight-start
    console.log('toPng', canvas.toDataURL('png')) // 在控制台输出 png（base64）
    canvas.requestRenderAll()
    // highlight-end
  }

  useEffect(() => {
    fabricCanvas.current = new fabric.Canvas(canvasRef.current)
    draw(fabricCanvas.current)
    return () => {
      fabricCanvas = null
    }
  }, [])
  return (
    <div>
      <canvas ref={canvasRef} style={{ border: '1px solid #ccc' }}></canvas>
    </div>
  )
}
```
