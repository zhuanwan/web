---
sidebar_position: 1
---

import { Test1, Test2, Test3, Test4 } from './图片.jsx'

# 图片

## 创建

使用 `fabric.Image.fromURL(imgpath, function)` 方法创建图片

第一个参数是图片路径

第二个回调

<Test1></Test1>

<br />

```js
fabric.Image.fromURL('/images/cat.jpg', (img) => {
  img.set({ left: 30, top: 20 })
  canvas.add(img)
})
```

## 另一种方法创建

使用 `new fabric.Image(img, object)` 方法创建图片

<Test2></Test2>

<br />

```js
const imgDom = document.getElementById('root')
imgDom.onload = function () {
  const img = new fabric.Image(imgDom, {
    left: 30,
    top: 20,
    scaleX: 1,
    scaleY: 1,
  })
}
```

## 多张图片重叠问题

图片置于最底层 `img.sendToBack()`

<Test3></Test3>

<br />

```js
export function Test3() {
  const canvasRef = useRef(null)
  const fabricCanvas = useRef(null)

  const draw = (canvas) => {
    fabric.Image.fromURL('/images/cat.jpg', (img) => {
      img.set({ left: 30, top: 20 })
      canvas.add(img)
    })

    fabric.Image.fromURL('/images/cat2.jpg', (img) => {
      canvas.add(img)
      // highlight-start
      // 图片置于最底层
      img.sendToBack()
      // highlight-end
    })
  }

  useEffect(() => {
    fabricCanvas.current = new fabric.Canvas(canvasRef.current)
    draw(fabricCanvas.current)
    return () => {
      fabricCanvas = null
    }
  }, [])
  return (
    <div>
      <canvas ref={canvasRef} style={{ border: '1px solid #ccc' }}></canvas>
    </div>
  )
}
```

## 添加滤镜

<Test4></Test4>

<br />

```js
fabric.Image.fromURL('/images/cat.jpg', (img) => {
  // 添加滤镜
  img.filters.push(
    new fabric.Image.filters.Grayscale(),
    new fabric.Image.filters.Sepia(), //色偏
    new fabric.Image.filters.Brightness({ brightness: 0.2 }) //亮度
  )
  // 图片加载完成之后，应用滤镜效果
  img.applyFilters()
  canvas.add(img)
})
```

fabric 内置滤镜

- BaseFilter 基本过滤器
- Blur 模糊
- Brightness 亮度
- ColorMatrix 颜色矩阵
- Contrast 对比
- Convolute 卷积
- Gamma 伽玛
- Grayscale 灰度
- HueRotation 色调旋转
- Invert 倒置
- Noise 噪音
- Pixelate 像素化
- RemoveColor 移除颜色
- Resize 调整大小
- Saturation 饱和
- Sepia 色偏
