---
sidebar_position: 2
---

# 纯函数

:::tip 定义
纯函数是这样一种函数，即相同的输入，永远会得到相同的输出，而且没有任何可观察的副作用。
:::

示例
``` js
// 纯函数
function add(a, b) {
  return a + b
}

let z = 1
// 不是纯函数，引入了外部可变量z
function add(a, b) {
  return a + b + z
}
```

## 纯函数的好处

### 缓存函数

```js
function memoize(f) {
  var cache = {}
  let _this = this
  return function() {
    var arg_str = JSON.stringify(arguments)
    cache[arg_str] = cache[arg_str] || f.apply(_this, arguments)
    return cache[arg_str]
  }
}

function add(a, b) {
  console.log('执行add')
  return a + b
}

const cacheAdd = memoize(add)

console.log(cacheAdd(1, 2))
console.log(cacheAdd(1, 2))

// 执行add
// 3
// 3
```

### 可移植性

上面那个 `add` 方法直接复制到其他项目可以立即使用，因为没有副作用

### 可测试性

相同的输入，永远会得到相同的输出

### 并行代码

我们可以并行运行任意纯函数。因为纯函数根本不需要访问共享的内存，而且根据其定义，纯函数也不会因副作用而进入竞争态


## 参考

https://llh911001.gitbooks.io/mostly-adequate-guide-chinese/content/ch3.html




