"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[8533],{78533:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ post_message_parent)\n});\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.keys.js\nvar es_object_keys = __webpack_require__(79432);\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(96540);\n;// ./src/pages/post-message/parent/index.module.less\n// extracted by mini-css-extract-plugin\n/* harmony default export */ const index_module = ({\"iframe\":\"iframe___sQnue\"});\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(74848);\n;// ./src/pages/post-message/parent/index.jsx\n\n\n\n\nvar Component = function Component() {\n  var iframeRef = (0,react.useRef)(null);\n\n  // 发消息\n  var handleLoad = function handleLoad() {\n    setTimeout(function () {\n      iframeRef.current.contentWindow.postMessage(JSON.stringify({\n        data: '我是父窗口，我加载了iframe'\n      }), '*');\n    }, 0);\n  };\n  (0,react.useEffect)(function () {\n    var handler = function handler(e) {\n      try {\n        var data = JSON.parse(e.data);\n        console.log('我是父窗口我接收到数据：', data);\n        if (data.type === 'show') {\n          console.log(data.type);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    // 接收消息\n    window.addEventListener('message', handler);\n    return function () {\n      window.removeEventListener('message', handler);\n    };\n  }, []);\n  (0,react.useEffect)(function () {\n    var visibleToggle = function visibleToggle() {\n      if (document.hidden) {\n        console.log('hide');\n      } else {\n        console.log('show');\n      }\n    };\n    document.addEventListener('visibilitychange', visibleToggle);\n    return function () {\n      document.removeEventListener('visibilitychange', visibleToggle);\n    };\n  }, []);\n  return /*#__PURE__*/(0,jsx_runtime.jsx)(\"iframe\", {\n    className: index_module.iframe,\n    title: \"sic\",\n    src: \"https://zhuanwan.github.io/web/post-message/child\",\n    ref: iframeRef,\n    onLoad: handleLoad\n  });\n};\n/* harmony default export */ const post_message_parent = (Component);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzg1MzMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7Ozs7O0FDREE7QUFFQTtBQUFBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvcGFnZXMvcG9zdC1tZXNzYWdlL3BhcmVudC9pbmRleC5tb2R1bGUubGVzcz9iY2Q3Iiwid2VicGFjazovL3dlYi8uL3NyYy9wYWdlcy9wb3N0LW1lc3NhZ2UvcGFyZW50L2luZGV4LmpzeD8xNDM3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IGRlZmF1bHQge1wiaWZyYW1lXCI6XCJpZnJhbWVfX19zUW51ZVwifTsiLCJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0J1xyXG5cclxuaW1wb3J0IHN0eWxlcyBmcm9tICcuL2luZGV4Lm1vZHVsZS5sZXNzJ1xyXG5cclxuY29uc3QgQ29tcG9uZW50ID0gKCkgPT4ge1xyXG4gIGNvbnN0IGlmcmFtZVJlZiA9IHVzZVJlZihudWxsKVxyXG5cclxuICAvLyDlj5Hmtojmga9cclxuICBjb25zdCBoYW5kbGVMb2FkID0gKCkgPT4ge1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGlmcmFtZVJlZi5jdXJyZW50LmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoeyBkYXRhOiAn5oiR5piv54i256qX5Y+j77yM5oiR5Yqg6L295LqGaWZyYW1lJyB9KSwgJyonKVxyXG4gICAgfSwgMClcclxuICB9XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBoYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShlLmRhdGEpXHJcbiAgICAgICAgY29uc29sZS5sb2coJ+aIkeaYr+eItueql+WPo+aIkeaOpeaUtuWIsOaVsOaNru+8micsIGRhdGEpXHJcbiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ3Nob3cnKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLnR5cGUpXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyDmjqXmlLbmtojmga9cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlcilcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlcilcclxuICAgIH1cclxuICB9LCBbXSlcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IHZpc2libGVUb2dnbGUgPSAoKSA9PiB7XHJcbiAgICAgIGlmIChkb2N1bWVudC5oaWRkZW4pIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnaGlkZScpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3Nob3cnKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgdmlzaWJsZVRvZ2dsZSlcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCB2aXNpYmxlVG9nZ2xlKVxyXG4gICAgfVxyXG4gIH0sIFtdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGlmcmFtZVxyXG4gICAgICBjbGFzc05hbWU9e3N0eWxlcy5pZnJhbWV9XHJcbiAgICAgIHRpdGxlPVwic2ljXCJcclxuICAgICAgc3JjPVwiaHR0cHM6Ly96aHVhbndhbi5naXRodWIuaW8vd2ViL3Bvc3QtbWVzc2FnZS9jaGlsZFwiXHJcbiAgICAgIHJlZj17aWZyYW1lUmVmfVxyXG4gICAgICBvbkxvYWQ9e2hhbmRsZUxvYWR9XHJcbiAgICAvPlxyXG4gIClcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ29tcG9uZW50XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///78533\n")}}]);