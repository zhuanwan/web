"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[1900],{81900:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Component)\n/* harmony export */ });\n/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2008);\n/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(26099);\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(96540);\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(24922);\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(27721);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(74848);\n\n\n// 立方体-鼠标点击查找相交点\n\n\n\n\nfunction Component() {\n  var canvasRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  var rendererRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  var cameraRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  var sceneRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  var createCube = function createCube() {\n    // 材质（需要让立方体能够反射光，所以不使用MeshBasicMaterial，而用MeshPhongMaterial）\n    var material = new three__WEBPACK_IMPORTED_MODULE_5__/* .MeshPhongMaterial */ .tXL({\n      color: 0x00ff88\n    });\n    // 立方体\n    var geometry = new three__WEBPACK_IMPORTED_MODULE_5__/* .BoxGeometry */ .iNn(3, 3, 3); // 增大立方体的尺寸\n\n    // Mesh网格\n    var cube1 = new three__WEBPACK_IMPORTED_MODULE_5__/* .Mesh */ .eaF(geometry, material);\n    cube1.userData.type = 'cube1';\n    cube1.position.x = -6;\n    sceneRef.current.add(cube1);\n    var material2 = new three__WEBPACK_IMPORTED_MODULE_5__/* .MeshPhongMaterial */ .tXL({\n      color: 0x0000ff\n    });\n    var cube2 = new three__WEBPACK_IMPORTED_MODULE_5__/* .Mesh */ .eaF(geometry, material2);\n    cube2.userData.type = 'cube2';\n    cube1.add(cube2);\n    var cube3 = new three__WEBPACK_IMPORTED_MODULE_5__/* .Mesh */ .eaF(geometry, material);\n    cube3.userData.type = 'cube3';\n    cube3.position.x = 6;\n    sceneRef.current.add(cube3);\n    var cubs = [cube1, cube2, cube3];\n\n    // 动画函数\n    rendererRef.current.setAnimationLoop(function () {\n      // 旋转立方体\n      cubs.forEach(function (cube) {\n        cube.rotation.x += 0.01;\n        cube.rotation.y += 0.01;\n      });\n      rendererRef.current.render(sceneRef.current, cameraRef.current);\n    });\n  };\n  var pointerClickHandler = function pointerClickHandler(scene, camera) {\n    var raycaster = new three__WEBPACK_IMPORTED_MODULE_5__/* .Raycaster */ .tBo();\n    var pointer = new three__WEBPACK_IMPORTED_MODULE_5__/* .Vector2 */ .I9Y();\n\n    // 监听鼠标点击事件\n    var onPointerClick = function onPointerClick(event) {\n      pointer.x = event.clientX / window.innerWidth * 2 - 1;\n      pointer.y = -(event.clientY / window.innerHeight) * 2 + 1;\n\n      // 通过摄像机和鼠标位置更新射线\n      raycaster.setFromCamera(pointer, camera);\n      // 获取所有对象的交集\n      var meshes = scene.children.filter(function (s) {\n        return s.type === 'Mesh';\n      });\n      console.log('meshes', meshes);\n      // 第二个参数为 false 只检查传入的对象数组中的对象,为true会检查传入对象及其所有子孙对象\n      var intersects = raycaster.intersectObjects(meshes, false);\n      console.log('intersects', intersects);\n      if (intersects.length) {\n        // 检测是否点击了 CylinderGeometry 类型的对象\n        for (var i = 0; i < intersects.length; i++) {\n          console.log(i, intersects[i].object.userData.type);\n        }\n      }\n    };\n    window.addEventListener('click', onPointerClick);\n    return function () {\n      return window.removeEventListener('click', onPointerClick);\n    };\n  };\n\n  // 初始化 Three.js\n  (0,_util__WEBPACK_IMPORTED_MODULE_3__/* .useThreeInit */ .M)({\n    canvasRef: canvasRef,\n    rendererRef: rendererRef,\n    cameraRef: cameraRef,\n    sceneRef: sceneRef\n  });\n\n  // resize handler\n  (0,_util__WEBPACK_IMPORTED_MODULE_3__/* .useResizeHandler */ .Y)({\n    rendererRef: rendererRef,\n    cameraRef: cameraRef,\n    sceneRef: sceneRef\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(function () {\n    var cleanupPointerClickHandler = pointerClickHandler(sceneRef.current, cameraRef.current);\n    return function () {\n      cleanupPointerClickHandler();\n    };\n  }, []);\n\n  // 创建线条\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(function () {\n    createCube();\n  }, []);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        width: '100vw',\n        height: '100vh',\n        display: 'block'\n      }\n    })\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODE5MDAuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBOztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvcGFnZXMvdGhyZWUvY3ViZTIuanN4PzczMjAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8g56uL5pa55L2TLem8oOagh+eCueWHu+afpeaJvuebuOS6pOeCuVxyXG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCdcclxuaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnXHJcblxyXG5pbXBvcnQgeyB1c2VSZXNpemVIYW5kbGVyLCB1c2VUaHJlZUluaXQgfSBmcm9tICcuL3V0aWwnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb21wb25lbnQoKSB7XHJcbiAgY29uc3QgY2FudmFzUmVmID0gdXNlUmVmKG51bGwpXHJcblxyXG4gIGNvbnN0IHJlbmRlcmVyUmVmID0gdXNlUmVmKG51bGwpXHJcbiAgY29uc3QgY2FtZXJhUmVmID0gdXNlUmVmKG51bGwpXHJcbiAgY29uc3Qgc2NlbmVSZWYgPSB1c2VSZWYobnVsbClcclxuXHJcbiAgY29uc3QgY3JlYXRlQ3ViZSA9ICgpID0+IHtcclxuICAgIC8vIOadkOi0qO+8iOmcgOimgeiuqeeri+aWueS9k+iDveWkn+WPjeWwhOWFie+8jOaJgOS7peS4jeS9v+eUqE1lc2hCYXNpY01hdGVyaWFs77yM6ICM55SoTWVzaFBob25nTWF0ZXJpYWzvvIlcclxuICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHsgY29sb3I6IDB4MDBmZjg4IH0pXHJcbiAgICAvLyDnq4vmlrnkvZNcclxuICAgIGNvbnN0IGdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDMsIDMsIDMpIC8vIOWinuWkp+eri+aWueS9k+eahOWwuuWvuFxyXG5cclxuICAgIC8vIE1lc2jnvZHmoLxcclxuICAgIGNvbnN0IGN1YmUxID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKVxyXG4gICAgY3ViZTEudXNlckRhdGEudHlwZSA9ICdjdWJlMSdcclxuICAgIGN1YmUxLnBvc2l0aW9uLnggPSAtNlxyXG4gICAgc2NlbmVSZWYuY3VycmVudC5hZGQoY3ViZTEpXHJcblxyXG4gICAgY29uc3QgbWF0ZXJpYWwyID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHsgY29sb3I6IDB4MDAwMGZmIH0pXHJcbiAgICBjb25zdCBjdWJlMiA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbDIpXHJcbiAgICBjdWJlMi51c2VyRGF0YS50eXBlID0gJ2N1YmUyJ1xyXG4gICAgY3ViZTEuYWRkKGN1YmUyKVxyXG5cclxuICAgIGNvbnN0IGN1YmUzID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKVxyXG4gICAgY3ViZTMudXNlckRhdGEudHlwZSA9ICdjdWJlMydcclxuICAgIGN1YmUzLnBvc2l0aW9uLnggPSA2XHJcbiAgICBzY2VuZVJlZi5jdXJyZW50LmFkZChjdWJlMylcclxuXHJcbiAgICBjb25zdCBjdWJzID0gW2N1YmUxLCBjdWJlMiwgY3ViZTNdXHJcblxyXG4gICAgLy8g5Yqo55S75Ye95pWwXHJcbiAgICByZW5kZXJlclJlZi5jdXJyZW50LnNldEFuaW1hdGlvbkxvb3AoKCkgPT4ge1xyXG4gICAgICAvLyDml4vovaznq4vmlrnkvZNcclxuICAgICAgY3Vicy5mb3JFYWNoKChjdWJlKSA9PiB7XHJcbiAgICAgICAgY3ViZS5yb3RhdGlvbi54ICs9IDAuMDFcclxuICAgICAgICBjdWJlLnJvdGF0aW9uLnkgKz0gMC4wMVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgcmVuZGVyZXJSZWYuY3VycmVudC5yZW5kZXIoc2NlbmVSZWYuY3VycmVudCwgY2FtZXJhUmVmLmN1cnJlbnQpXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgY29uc3QgcG9pbnRlckNsaWNrSGFuZGxlciA9IChzY2VuZSwgY2FtZXJhKSA9PiB7XHJcbiAgICBjb25zdCByYXljYXN0ZXIgPSBuZXcgVEhSRUUuUmF5Y2FzdGVyKClcclxuICAgIGNvbnN0IHBvaW50ZXIgPSBuZXcgVEhSRUUuVmVjdG9yMigpXHJcblxyXG4gICAgLy8g55uR5ZCs6byg5qCH54K55Ye75LqL5Lu2XHJcbiAgICBjb25zdCBvblBvaW50ZXJDbGljayA9IChldmVudCkgPT4ge1xyXG4gICAgICBwb2ludGVyLnggPSAoZXZlbnQuY2xpZW50WCAvIHdpbmRvdy5pbm5lcldpZHRoKSAqIDIgLSAxXHJcbiAgICAgIHBvaW50ZXIueSA9IC0oZXZlbnQuY2xpZW50WSAvIHdpbmRvdy5pbm5lckhlaWdodCkgKiAyICsgMVxyXG5cclxuICAgICAgLy8g6YCa6L+H5pGE5YOP5py65ZKM6byg5qCH5L2N572u5pu05paw5bCE57q/XHJcbiAgICAgIHJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKHBvaW50ZXIsIGNhbWVyYSlcclxuICAgICAgLy8g6I635Y+W5omA5pyJ5a+56LGh55qE5Lqk6ZuGXHJcbiAgICAgIGNvbnN0IG1lc2hlcyA9IHNjZW5lLmNoaWxkcmVuLmZpbHRlcigocykgPT4gcy50eXBlID09PSAnTWVzaCcpXHJcbiAgICAgIGNvbnNvbGUubG9nKCdtZXNoZXMnLCBtZXNoZXMpXHJcbiAgICAgIC8vIOesrOS6jOS4quWPguaVsOS4uiBmYWxzZSDlj6rmo4Dmn6XkvKDlhaXnmoTlr7nosaHmlbDnu4TkuK3nmoTlr7nosaEs5Li6dHJ1ZeS8muajgOafpeS8oOWFpeWvueixoeWPiuWFtuaJgOacieWtkOWtmeWvueixoVxyXG4gICAgICBjb25zdCBpbnRlcnNlY3RzID0gcmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMobWVzaGVzLCBmYWxzZSlcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKCdpbnRlcnNlY3RzJywgaW50ZXJzZWN0cylcclxuICAgICAgaWYgKGludGVyc2VjdHMubGVuZ3RoKSB7XHJcbiAgICAgICAgLy8g5qOA5rWL5piv5ZCm54K55Ye75LqGIEN5bGluZGVyR2VvbWV0cnkg57G75Z6L55qE5a+56LGhXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnRlcnNlY3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhpLCBpbnRlcnNlY3RzW2ldLm9iamVjdC51c2VyRGF0YS50eXBlKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uUG9pbnRlckNsaWNrKVxyXG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIG9uUG9pbnRlckNsaWNrKVxyXG4gIH1cclxuXHJcbiAgLy8g5Yid5aeL5YyWIFRocmVlLmpzXHJcbiAgdXNlVGhyZWVJbml0KHsgY2FudmFzUmVmLCByZW5kZXJlclJlZiwgY2FtZXJhUmVmLCBzY2VuZVJlZiB9KVxyXG5cclxuICAvLyByZXNpemUgaGFuZGxlclxyXG4gIHVzZVJlc2l6ZUhhbmRsZXIoeyByZW5kZXJlclJlZiwgY2FtZXJhUmVmLCBzY2VuZVJlZiB9KVxyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgY2xlYW51cFBvaW50ZXJDbGlja0hhbmRsZXIgPSBwb2ludGVyQ2xpY2tIYW5kbGVyKHNjZW5lUmVmLmN1cnJlbnQsIGNhbWVyYVJlZi5jdXJyZW50KVxyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGNsZWFudXBQb2ludGVyQ2xpY2tIYW5kbGVyKClcclxuICAgIH1cclxuICB9LCBbXSlcclxuXHJcbiAgLy8g5Yib5bu657q/5p2hXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNyZWF0ZUN1YmUoKVxyXG4gIH0sIFtdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdj5cclxuICAgICAgPGNhbnZhcyByZWY9e2NhbnZhc1JlZn0gc3R5bGU9e3sgd2lkdGg6ICcxMDB2dycsIGhlaWdodDogJzEwMHZoJywgZGlzcGxheTogJ2Jsb2NrJyB9fSAvPlxyXG4gICAgPC9kaXY+XHJcbiAgKVxyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///81900\n")}}]);